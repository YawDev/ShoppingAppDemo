@using Microsoft.AspNetCore.Identity;
@using ShoppingDemo.App.Data.Entites;

@inject UserManager<ApplicationUser> _userManager;

@model List<IdentityRole>

@{
    ViewData["Title"] = "Manage Roles";
}

<h1>Manage Roles</h1>

@if(Model.ToList().Count > 0)
{
    foreach (var role in Model)
    {
        <br></br>
            <a class="btn btn-primary btn-sm" 
                                                        asp-controller="Admin"
                                                        asp-action="AddToRole"
                                                        asp-route-role=@role.Name> Add User </a><br></br>
 <table class="table">
  <thead class="thead-dark">
    <tr>
      <th scope="col">@role.Name Role</th>
    </tr>
  </thead>
  <tbody>
    <tr>

      @foreach (var user in _userManager.GetUsersInRoleAsync(role.Name).Result)
      {
          <td>
              @user.FirstName      @user.LastName       @if(user.FirstName != "Sa"){
                                                        <a class="btn btn-danger btn-sm" 
                                                        asp-controller="Item"
                                                        asp-action="Delete"
                                                        asp-route-id="user.Id"> Remove </a>}
          </td>
      }
    </tr>     
  </tbody>
</table>
    }
}
else
{
  <p>No Roles Found.</p>
}